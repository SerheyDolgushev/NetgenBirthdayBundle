{% extends pagelayout %}

{% block content %}
<div class="clearfix">
    <div class="col-lg-9">
        <div class="box">
            <div class="box-header">
                <h2><i class="fa fa-file-text"></i>{{ 'Search'|trans }}</h2>
            </div>
            <div class="box-content">
                {% include form_template with { form: form, form_action: path( route, {'context': context} )} %}
            </div>
        </div>
    </div>
    <div class="col-lg-3">
        <div class="box">
            <div class="box-header">
                <h2><i class="fa fa-floppy-o"></i>Saved searches</h2>
            </div>
            <div class="box-content">
                <div class="right-info">
                    <input type="hidden" id="nodename" value="{$node.name}" />
                    <label>Latest saved searches</label>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="col-lg-12">
    <div class="box">
        <div class="box-header">
            <h2><i class="fa fa-file-text"></i>{{ 'Search results'|trans }}</h2>
        </div>
        <div class="box-content">
            <p>{{ 'Found:'|trans }} {{ pager.getNbResults() }}</p>
            {#<ul>
                {% for hit in pager %}
                    <li><a href="{{ path( 'ez_urlalias', {'locationId': hit.valueObject.contentInfo.mainLocationId} ) }}">{{ ez_content_name( hit.valueObject ) }}</a></li>
                {% endfor %}
            </ul>#}

{#/* @todo Izvuci iz configResolvera "locale" ( eg. eng-GB ) i proslijediti ga u getName('locale') za object stateove*/#}
    {% if not pager.getNbResults()  %}
        <p>{{ 'Sorry, no results were found.'|trans }}</p>
    {% else %}
            <table class="clickable table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Dossier number</th>
                        <th>Dossier title</th>
                        <th>Availability</th>
                        <th>Status</th>
                        <th>Legal Act number</th>
                        <th>Legal Act Type</th>
                        <th>Modification date</th>
                    </tr>
                </thead>
                <tbody>
                {% for hit in pager %}
                    <tr>
                        <td>{{ ez_field_value( hit.valueObject, "id" ) }}</td>
                        <td><a href="{{ path( 'ez_urlalias', {'locationId': hit.valueObject.contentInfo.mainLocationId} ) }}">{{ ez_field_value( hit.valueObject, "name" ) }}</a></td>
                        <td>{{ hit.objectStates.ngscs_visibility.getName(current_locale) }}</td>
                        <td>{{ hit.objectStates.rgm_status.getName(current_locale) }}</td>
                        <td>{{ ez_field_value( hit.valueObject, "number" ) }}</td>
                        <td>{{ ez_field_value( hit.valueObject, "ld_type" ) }}</td>
                        <td>{{ hit.valueObject.versionInfo.modificationDate.date|date( 'd/m/Y' ) }}</td>
                    </tr>{{ ezpublish.legacy.get('content_info')  }}

                {% endfor %}
                </tbody>
            </table>
            {% if pager.haveToPaginate() %}
                {{ pagerfanta( pager, 'twitter_bootstrap3_translated', {
                'routeName': route,
                'routeParams': query_string|merge({'context': context})
                } )
                }}
            {% endif %}
    {% endif %}
        </div>
    </div>
</div>


{% endblock %}